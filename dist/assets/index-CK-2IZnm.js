import{createCanvas as O}from"https://cdn.skypack.dev/shader-park-core";import{OrbitControls as _}from"https://unpkg.com/three@0.158.0/examples/jsm/controls/OrbitControls.js";import{GLTFLoader as J}from"https://unpkg.com/three@0.158.0/examples/jsm/loaders/GLTFLoader.js";(function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const n of document.querySelectorAll('link[rel="modulepreload"]'))i(n);new MutationObserver(n=>{for(const r of n)if(r.type==="childList")for(const d of r.addedNodes)d.tagName==="LINK"&&d.rel==="modulepreload"&&i(d)}).observe(document,{childList:!0,subtree:!0});function o(n){const r={};return n.integrity&&(r.integrity=n.integrity),n.referrerPolicy&&(r.referrerPolicy=n.referrerPolicy),n.crossOrigin==="use-credentials"?r.credentials="include":n.crossOrigin==="anonymous"?r.credentials="omit":r.credentials="same-origin",r}function i(n){if(n.ep)return;n.ep=!0;const r=o(n);fetch(n.href,r)}})();document.addEventListener("DOMContentLoaded",()=>{setTimeout(()=>{const e=document.getElementById("loadingScreen");e&&e.classList.add("hidden")},500)});setTimeout(()=>{const e=document.getElementById("loadingScreen");e&&(e.style.display="none")},3e3);gsap.registerPlugin(ScrollTrigger);const D=document.getElementById("cursor"),S=[];for(let e=0;e<10;e++){const t=document.createElement("div");t.className="cursor-trail",document.body.appendChild(t),S.push(t)}let b=0,R=0,w=[],E=[];for(let e=0;e<10;e++)w[e]=0,E[e]=0;document.addEventListener("mousemove",e=>{b=e.clientX,R=e.clientY,D.style.left=b-10+"px",D.style.top=R-10+"px"});function G(){w[0]=b,E[0]=R;for(let e=1;e<10;e++)w[e]+=(w[e-1]-w[e])*.3,E[e]+=(E[e-1]-E[e])*.3,S[e].style.left=w[e]-2+"px",S[e].style.top=E[e]-2+"px",S[e].style.opacity=(10-e)/10;requestAnimationFrame(G)}G();const c=document.getElementById("bg-canvas"),s=c.getContext("2d");c.width=window.innerWidth;c.height=window.innerHeight;const F=[];for(let e=0;e<100;e++)F.push({x:Math.random()*c.width,y:Math.random()*c.height,vx:(Math.random()-.5)*2,vy:(Math.random()-.5)*2,size:Math.random()*3+1,color:`hsl(${20+Math.random()*40}, 70%, ${50+Math.random()*30}%)`,opacity:Math.random()*.5+.2});function X(){s.clearRect(0,0,c.width,c.height),F.forEach(e=>{e.x+=e.vx,e.y+=e.vy,(e.x<0||e.x>c.width)&&(e.vx*=-1),(e.y<0||e.y>c.height)&&(e.vy*=-1),F.forEach(t=>{const o=e.x-t.x,i=e.y-t.y,n=Math.sqrt(o*o+i*i);n<150&&(s.strokeStyle=`rgba(255, 107, 0, ${.2*(1-n/150)})`,s.lineWidth=1,s.beginPath(),s.moveTo(e.x,e.y),s.lineTo(t.x,t.y),s.stroke())}),s.beginPath(),s.arc(e.x,e.y,e.size,0,Math.PI*2),s.fillStyle=e.color,s.globalAlpha=e.opacity,s.fill(),s.globalAlpha=1}),requestAnimationFrame(X)}X();const u=document.getElementById("matrix"),p=u.getContext("2d");u.width=window.innerWidth;u.height=window.innerHeight;const B="01アイウエオカキクケコサシスセソタチツテトナニヌネノハヒフヘホマミムメモヤユヨラリルレロワヲン",M=14,ee=u.width/M,x=[];for(let e=0;e<ee;e++)x[e]=1;function te(){p.fillStyle="rgba(0, 0, 8, 0.05)",p.fillRect(0,0,u.width,u.height),p.fillStyle="#FF6B00",p.font=M+"px monospace";for(let e=0;e<x.length;e++){const t=B[Math.floor(Math.random()*B.length)];p.fillText(t,e*M,x[e]*M),x[e]*M>u.height&&Math.random()>.975&&(x[e]=0),x[e]++}}setInterval(te,35);const $=new Lenis;function k(e){$.raf(e),requestAnimationFrame(k)}requestAnimationFrame(k);try{const e=document.getElementById("noise");if(e&&typeof O=="function"){const t=O(e,({uv:o,time:i})=>{const n=sin(o.x*15+i*2)*.3,r=sin(o.y*20+i*1.5)*.3,d=sin((o.x+o.y)*10+i)*.2;return vec3(n+.4,r+.2,d+.6)})}}catch{console.log("Shader Park not available, using fallback")}const m=new THREE.Scene;m.fog=new THREE.Fog(8,10,100);const v=new THREE.PerspectiveCamera(75,window.innerWidth/window.innerHeight,.1,1e3),f=new THREE.WebGLRenderer({canvas:document.getElementById("webgl"),antialias:!0,alpha:!0});f.setSize(window.innerWidth,window.innerHeight);f.setClearColor(8,.8);f.shadowMap.enabled=!0;f.shadowMap.type=THREE.PCFSoftShadowMap;f.setPixelRatio(Math.min(window.devicePixelRatio,2));const oe=new THREE.AmbientLight(4210752,.3);m.add(oe);const P=new THREE.DirectionalLight(16739072,1);P.position.set(10,10,5);P.castShadow=!0;m.add(P);const C=new THREE.PointLight(54527,.8,50);C.position.set(-10,5,0);m.add(C);const A=new THREE.PointLight(16711808,.6,30);A.position.set(5,-5,10);m.add(A);const N=30,ne=new THREE.PlaneGeometry(N,N,30,30),ie=new THREE.ShaderMaterial({uniforms:{time:{value:0},color1:{value:new THREE.Color(16739072)},color2:{value:new THREE.Color(54527)}},vertexShader:`
                uniform float time;
                varying vec2 vUv;
                varying vec3 vPosition;
                
                void main() {
                    vUv = uv;
                    vPosition = position;
                    
                    vec3 pos = position;
                    pos.z += sin(pos.x * 0.5 + time) * 0.5;
                    pos.z += sin(pos.y * 0.3 + time * 1.2) * 0.3;
                    
                    gl_Position = projectionMatrix * modelViewMatrix * vec4(pos, 1.0);
                }
            `,fragmentShader:`
                uniform float time;
                uniform vec3 color1;
                uniform vec3 color2;
                varying vec2 vUv;
                varying vec3 vPosition;
                
                void main() {
                    float wave = sin(vPosition.x * 0.1 + time) * sin(vPosition.y * 0.1 + time * 0.7);
                    vec3 color = mix(color1, color2, wave * 0.5 + 0.5);
                    
                    float alpha = 0.3 + wave * 0.2;
                    gl_FragColor = vec4(color, alpha);
                }
            `,wireframe:!0,transparent:!0}),I=new THREE.Mesh(ne,ie);I.rotation.x=-Math.PI/2;I.position.y=-3;m.add(I);const Q=[];for(let e=0;e<20;e++){const t=new THREE.BoxGeometry(.5,.5,.5),o=new THREE.MeshPhongMaterial({color:Math.random()>.5?16739072:54527,transparent:!0,opacity:.7}),i=new THREE.Mesh(t,o);i.position.set((Math.random()-.5)*20,Math.random()*10+2,(Math.random()-.5)*20),i.rotation.set(Math.random()*Math.PI,Math.random()*Math.PI,Math.random()*Math.PI),Q.push(i),m.add(i)}const L=new _(v,f.domElement);L.enableDamping=!0;L.dampingFactor=.05;L.autoRotate=!0;L.autoRotateSpeed=.5;const re=new J;let l;re.load("/assets/van.glb",e=>{l=e.scene,l.scale.set(3,3,3),l.position.set(0,2,0),l.traverse(t=>{t.isMesh&&(t.material.emissive=new THREE.Color(16739072),t.material.emissiveIntensity=.2)}),m.add(l),gsap.fromTo(l.position,{y:20,x:-10},{y:2,x:0,duration:3,ease:"power2.out"}),gsap.fromTo(l.rotation,{y:Math.PI*4,z:Math.PI},{y:0,z:0,duration:3,ease:"power2.out"})},void 0,e=>{console.log("Loading fallback quantum vehicle");const t=new THREE.CylinderGeometry(1,2,3,8),o=new THREE.MeshPhongMaterial({color:16739072,emissive:16739072,emissiveIntensity:.3});l=new THREE.Mesh(t,o),l.position.set(0,2,0),m.add(l),gsap.fromTo(l.position,{y:20},{y:2,duration:3,ease:"bounce.out"})});v.position.set(8,6,8);v.lookAt(0,0,0);let T=0;function K(){requestAnimationFrame(K),T+=.01,L.update(),I.material.uniforms&&(I.material.uniforms.time.value=T),Q.forEach((e,t)=>{e.rotation.x+=.01+t*.001,e.rotation.y+=.015+t*5e-4,e.position.y+=Math.sin(T+t)*.01}),C.intensity=.8+Math.sin(T*2)*.3,A.intensity=.6+Math.cos(T*1.5)*.2,f.render(m,v)}K();window.addEventListener("resize",()=>{v.aspect=window.innerWidth/window.innerHeight,v.updateProjectionMatrix(),f.setSize(window.innerWidth,window.innerHeight),c.width=window.innerWidth,c.height=window.innerHeight,u.width=window.innerWidth,u.height=window.innerHeight});gsap.utils.toArray(".num").forEach(e=>{let t=e.dataset.val;if(t==="∞"){let o=["∞","⚡","🚀","💫","∞"],i=0;setInterval(()=>{e.innerText=o[i],i=(i+1)%o.length},500)}else t=+t,gsap.fromTo(e,{innerText:0},{innerText:t,duration:3,scrollTrigger:{trigger:e,start:"top 80%"},snap:{innerText:1},ease:"power2.out",onUpdate:function(){t<1e3?e.innerText=Math.floor(e.innerText):e.innerText=Math.floor(e.innerText).toLocaleString()}})});function ae(){const e=["INITIALIZING QUANTUM PROTOCOLS...","NEURAL NETWORKS ACTIVATED","EDGE COMPUTING ENABLED","REALITY.EXE HAS STOPPED WORKING","WELCOME TO THE FUTURE"];let t=0;const o=document.getElementById("typewriter-text");function i(d,a){let y=0;o.textContent="";function H(){y<d.length?(Math.random()>.9&&(o.classList.add("glitch"),setTimeout(()=>o.classList.remove("glitch"),100)),o.textContent+=d[y],y++,setTimeout(H,50+Math.random()*50)):setTimeout(a,3e3)}H()}function n(d){let a=o.textContent;function y(){a.length>0?(a=a.slice(0,-1),o.textContent=a,setTimeout(y,30)):setTimeout(d,500)}y()}function r(){i(e[t],()=>{n(()=>{t=(t+1)%e.length,r()})})}r()}setTimeout(ae,2e3);const U=document.getElementById("nav");window.addEventListener("scroll",()=>{window.scrollY>100?U.classList.add("scrolled"):U.classList.remove("scrolled")});const z=document.getElementById("pwaRibbon");ScrollTrigger.create({trigger:"body",start:"75%",onEnter:()=>z.classList.add("visible"),onLeaveBack:()=>z.classList.remove("visible")});document.getElementById("contactForm").addEventListener("submit",e=>{e.preventDefault();const t=new FormData(e.target),o=t.get("name"),i=t.get("email"),n=t.get("message"),r=encodeURIComponent("QUANTUM MISSION REQUEST FROM "+o),d=encodeURIComponent(`NEURAL ID: ${o}
QUANTUM ADDRESS: ${i}
MISSION: ${n}`);window.location.href=`mailto:flexgo.7983150@gmail.com?subject=${r}&body=${d}`;const a=document.createElement("div");a.innerHTML="🚀 QUANTUM LINK ESTABLISHED! MISSION UPLOADED TO THE MAINFRAME! ⚡",a.style.cssText=`
                position: fixed;
                top: 20px;
                right: 20px;
                background: linear-gradient(45deg, #FF6B00, #00D4FF);
                color: white;
                padding: 2rem;
                border-radius: 15px;
                z-index: 10000;
                transform: translateX(100%) scale(0);
                transition: all 0.5s ease;
                font-weight: 700;
                font-size: 1.1rem;
                max-width: 400px;
                box-shadow: 0 0 50px rgba(255, 107, 0, 0.8);
            `,document.body.appendChild(a),setTimeout(()=>{a.style.transform="translateX(0) scale(1)"},100),setTimeout(()=>{a.style.transform="translateX(100%) scale(0)",setTimeout(()=>a.remove(),500)},5e3)});const h=document.getElementById("confetti"),g=h.getContext("2d");function Y(){h.width=window.innerWidth,h.height=300}Y();window.addEventListener("resize",Y);const j=[];for(let e=0;e<150;e++)j.push({x:Math.random()*h.width,y:Math.random()*h.height,vx:(Math.random()-.5)*4,vy:(Math.random()-.5)*4,color:["#FF6B00","#00D4FF","#FF0080","#FFD700"][Math.floor(Math.random()*4)],size:Math.random()*8+4,rotation:Math.random()*360,rotationSpeed:(Math.random()-.5)*10});function V(){g.clearRect(0,0,h.width,h.height),j.forEach(e=>{e.x+=e.vx,e.y+=e.vy,e.rotation+=e.rotationSpeed,(e.x<0||e.x>h.width)&&(e.vx*=-1),(e.y<0||e.y>h.height)&&(e.vy*=-1),g.save(),g.translate(e.x,e.y),g.rotate(e.rotation*Math.PI/180),g.fillStyle=e.color,g.fillRect(-e.size/2,-e.size/2,e.size,e.size),g.restore()}),requestAnimationFrame(V)}V();document.querySelectorAll(".star").forEach(e=>{e.addEventListener("keydown",t=>{(t.key==="Enter"||t.key===" ")&&(t.preventDefault(),e.focus(),e.style.filter="brightness(300%) drop-shadow(0 0 100px currentColor)",setTimeout(()=>{e.style.filter=""},1e3))})});document.querySelectorAll('a[href^="#"]').forEach(e=>{e.addEventListener("click",function(t){t.preventDefault();const o=document.querySelector(this.getAttribute("href"));o&&$.scrollTo(o,{offset:-100,duration:2})})});let W=0,q=performance.now();function Z(){const e=performance.now();W=1e3/(e-q),q=e,W<30&&F.length>50&&F.splice(0,10),requestAnimationFrame(Z)}Z();console.log("%c🚀 FLEX GO EDGE∞ ACTIVATED! 🚀","color: #FF6B00; font-size: 20px; font-weight: bold;");console.log("%cQUANTUM PROTOCOLS INITIALIZED","color: #00D4FF; font-size: 14px;");console.log("%cNEURAL NETWORKS ONLINE","color: #FF0080; font-size: 14px;");
